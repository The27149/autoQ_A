# AutoAsk - 问卷自动填写工具

基于 Puppeteer 的问卷自动填写工具，支持自定义答案权重和随机选择。

## 功能特点

- 自动填写问卷星等在线问卷
- 支持答案权重配置，实现概率性选择
- 支持输入框随机填写
- 自动提交并统计成功率
- 可自定义填写次数

## 环境要求

- Node.js >= 18.0.0
- npm >= 9.0.0

## 安装步骤

1. 解压或下载项目文件

2. 安装依赖：
```bash
npm install
```

## 配置说明

1. 复制配置模板：
```bash
copy config.example.json config.json
```

2. 编辑 `config.json` 文件：

```json
{
  "targetUrl": "https://v.wjx.cn/vm/your-survey-id.aspx",  // 问卷链接
  "numb": 3,                                                 // 填写次数
  "answers": {
    "1": [
      {"id": 1, "text": "选项1", "weight": 5},  // 单选题：id为选项ID，weight为权重
      {"id": 2, "text": "选项2", "weight": 3}   // 权重越大，被选中概率越高
    ],
    "8": ["还可以", "没有意见", "挺好的"]  // 输入框：随机从数组中选择一个文本
  }
}
```

### 配置说明

- **targetUrl**: 目标问卷的完整 URL
- **numb**: 需要自动填写的次数
- **answers**: 各题目的答案配置
  - 键名 `1, 2, 3...` 对应题目序号
  - 单选题：数组包含多个对象，每个对象有 `id`（选项ID）、`text`（选项文本）、`weight`（权重）
  - 输入框：数组包含多个字符串，随机选择一个填写
  - 第8题被硬编码为输入框类型，其他题目默认为单选题

### 如何获取选项ID

1. 打开问卷页面
2. 按 F12 打开开发者工具
3. 使用选择器工具点击选项
4. 查看元素的 `id` 属性，格式为 `q{题号}_{选项ID}`

## 使用方法

### 开发模式（推荐用于测试）
```bash
npm run dev
```

### 生产模式（编译后运行）
```bash
npm run build
npm start
```

## 输出示例

运行后会显示实时进度和统计信息：

```
进度: 1/3 (33.33%) - 成功
进度: 2/3 (66.67%) - 成功
进度: 3/3 (100.00%) - 成功

========== 统计信息 ==========
总次数: 3
成功: 3
失败: 0
成功率: 100.00%
总耗时: 15.23秒
平均耗时: 5.08秒/次
============================
```

## 注意事项

1. 首次运行会自动下载 Chromium 浏览器，可能需要较长时间
2. 请合理使用，避免对问卷平台造成过大压力
3. 某些问卷可能有防作弊机制，请谨慎使用
4. 配置文件 `config.json` 包含敏感信息，请勿上传到公开仓库

## 常见问题

### Q: 运行时提示找不到 Chromium？
A: 首次运行会自动下载，请耐心等待。如果下载失败，可尝试配置国内镜像。

### Q: 填写失败怎么办？
A: 检查网络连接、问卷链接是否正确、选项ID是否匹配。

### Q: 如何修改输入框题目？
A: 目前代码中第8题（索引7）被硬编码为输入框，如需修改请编辑 `src/index.ts`。

## 许可证

MIT License